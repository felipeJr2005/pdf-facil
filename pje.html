<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>PJe Simples - Teste Básico</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 20px; }
        .form-control { width: 100%; padding: 8px; margin-bottom: 10px; box-sizing: border-box; }
        .btn { padding: 8px 15px; margin-right: 10px; cursor: pointer; background: #007bff; color: white; border: none; }
        #pdf-viewer { width: 100%; height: 500px; border: 1px solid #ddd; }
        #log { background: #f8f9fa; padding: 10px; height: 150px; overflow-y: auto; font-family: monospace; font-size: 12px; }
    </style>
</head>
<body>
    <h2>PJe Simples - Só testar se abre</h2>
    
    <input type="url" id="pdf-url" class="form-control" placeholder="URL do PJe" value="https://pje.cloud.tjpe.jus.br/1g/seam/resource/rest/pje-legacy/documento/download/137195928">
    <button id="btn-load" class="btn">Carregar</button>
    <button id="btn-test" class="btn">Teste Básico</button>
    
    <br><br>
    <iframe id="pdf-viewer"></iframe>
    
    <div id="log">Log...</div>

    <script>
        const urlInput = document.getElementById('pdf-url');
        const btnLoad = document.getElementById('btn-load');
        const btnTest = document.getElementById('btn-test');
        const pdfViewer = document.getElementById('pdf-viewer');
        const logDiv = document.getElementById('log');
        
        function log(msg) {
            logDiv.innerHTML += new Date().toLocaleTimeString() + ' - ' + msg + '\n';
            logDiv.scrollTop = logDiv.scrollHeight;
        }
        
        // Só carregar iframe - SIMPLES
        btnLoad.addEventListener('click', function() {
            const url = urlInput.value.trim();
            log('Carregando: ' + url);
            pdfViewer.src = url;
        });
        
        // Teste básico de interceptação - SEM INJEÇÃO
        btnTest.addEventListener('click', function() {
            log('=== TESTE BÁSICO ===');
            
            // Interceptar fetch APENAS no contexto atual
            const originalFetch = window.fetch;
            window.fetch = function(...args) {
                const url = args[0];
                if (typeof url === 'string') {
                    log('FETCH: ' + url.substring(0, 80) + '...');
                }
                return originalFetch.apply(this, args);
            };
            
            log('Interceptação ativa no contexto principal');
            log('Agora clique no botão roxo e veja se aparece algo');
        });
        
        // Auto-carregar
        if (urlInput.value) {
            btnLoad.click();
        }
    </script>
</body>
</html>