<!-- Template para Audiência utilizando Bootstrap - TESTE A: contenteditable v1.2 -->
<div class="container-fluid px-0">
  <!-- Campos de Data e Link da Audiência -->
  <div class="card shadow-sm mb-4">
    <div class="card-header bg-info-subtle">
      <h5 class="card-title text-info mb-0">
        <i class="fas fa-calendar-alt me-2"></i> Audiência Designada
      </h5>
    </div>
    <div class="card-body">
      <div class="row">
        <div class="col-md-6 mb-3">
          <label for="audiencia-data" class="form-label">Data da AAudiência</label>
          <input type="text" class="form-control" id="audiencia-data" placeholder="DD/MM/AAAA HH:MM" data-textblaze-audiencia="data">
        </div>
        <div class="col-md-6 mb-3">
          <label for="audiencia-link" class="form-label">Link da Audiência</label>
          <input type="text" class="form-control" id="audiencia-link" placeholder="https://..." data-textblaze-audiencia="link">
        </div>
      </div>
    </div>
  </div>

  <div class="audiencia-grid">
    <!-- Lado Acusatório -->
    <div class="card shadow-sm mb-4">
      <div class="card-header bg-primary-subtle">
        <h5 class="card-title text-primary mb-0">
          <i class="fas fa-gavel me-2"></i> Acusação
        </h5>
      </div>
      <div class="card-body">
        <div class="card mb-3">
          <div class="card-header d-flex justify-content-between align-items-center">
            <h6 class="mb-0">Ministério Público</h6>
            <div class="form-check">
              <input type="checkbox" class="form-check-input" id="intimado_mp" data-textblaze-mp="intimado">
              <label class="form-check-label" for="intimado_mp">Intimado</label>
            </div>
          </div>
          <div class="card-body">
            <button class="btn btn-sm btn-outline-primary" id="addAssistenteBtn">
              <i class="fas fa-user-plus me-1"></i> Assistente de Acusação
            </button>
            <div id="assistente-acusacao-container" class="mt-2" data-textblaze-container="assistente"></div>
          </div>
        </div>

        <div class="card mb-3">
          <div class="card-header d-flex justify-content-between align-items-center">
            <h6 class="mb-0">Vítimas</h6>
            <button class="btn btn-sm btn-outline-primary" id="addVitimaBtn">
              <i class="fas fa-plus me-1"></i> Adicionar Vítima
            </button>
          </div>
          <div class="card-body">
            <div id="vitimas-container" data-textblaze-container="vitima"></div>
          </div>
        </div>

        <div class="card mb-3">
          <div class="card-header d-flex justify-content-between align-items-center">
            <h6 class="mb-0">Testemunhas</h6>
            <button class="btn btn-sm btn-outline-primary" id="addTestemunhaMpBtn">
              <i class="fas fa-plus me-1"></i> Adicionar Testemunha
            </button>
          </div>
          <div class="card-body">
            <div id="testemunhas-mp-container" data-textblaze-container="testemunha-mp"></div>
          </div>
        </div>

        <div class="card mb-3">
          <div class="card-header d-flex justify-content-between align-items-center">
            <h6 class="mb-0">Policiais</h6>
            <button class="btn btn-sm btn-outline-primary" id="addPolicialBtn">
              <i class="fas fa-plus me-1"></i> Adicionar Policial
            </button>
          </div>
          <div class="card-body">
            <div id="policiais-container" data-textblaze-container="policial"></div>
          </div>
        </div>

        <div class="mb-3">
          <div class="d-flex justify-content-between align-items-center mb-2">
            <label for="observacoes-mp" class="form-label mb-0">Observações do Ministério Público</label>
            <div class="d-flex gap-2">
              <div class="btn-group" role="group">
                <button type="button" class="btn btn-sm btn-outline-secondary dropdown-toggle" data-bs-toggle="dropdown" aria-expanded="false">
                  Atualizar
                </button>
                <ul class="dropdown-menu">
                  <li>
                    <button class="dropdown-item" type="button" id="processarDeepSeek">
                      Modelo Ds
                    </button>
                  </li>
                  <li>
                    <button class="dropdown-item" type="button" id="processarGemini">
                      Modelo Ge
                    </button>
                  </li>
                </ul>
              </div>
              <button type="button" class="btn btn-sm btn-outline-secondary" id="limparObservacoesMP">
                <i class="fas fa-eraser me-1"></i> Branco
              </button>
            </div>
          </div>
          <!-- MUDANÇA PRINCIPAL: textarea → div contenteditable -->
          <div id="observacoes-mp" class="form-control editable-content" contenteditable="true" spellcheck="true" data-placeholder="Cole aqui o texto da denúncia para processamento automático ou digite as observações do MP" style="min-height: 120px; max-height: 300px; overflow-y: auto;" data-textblaze-mp="observacoes"></div>
          <div class="text-muted small mt-1">
            <i class="fas fa-info-circle me-1"></i>
            Cole o texto da denúncia e clique em "Atualizar" para extrair dados automaticamente
          </div>
        </div>
      </div>
    </div>

    <!-- Lado Defesa -->
    <div class="card shadow-sm mb-4">
      <div class="card-header bg-primary-subtle">
        <h5 class="card-title text-primary mb-0">
          <i class="fas fa-shield-alt me-2"></i> Defesa
        </h5>
      </div>
      <div class="card-body">
        <div class="card mb-3">
          <div class="card-header d-flex justify-content-between align-items-center">
            <h6 class="mb-0">Réus</h6>
            <button class="btn btn-sm btn-outline-primary" id="addReuBtn">
              <i class="fas fa-plus me-1"></i> Adicionar Réu
            </button>
          </div>
          <div class="card-body">
            <div id="reus-container" data-textblaze-container="reu"></div>
          </div>
        </div>

        <div class="card mb-3">
          <div class="card-header d-flex justify-content-between align-items-center">
            <h6 class="mb-0">Testemunhas</h6>
            <button class="btn btn-sm btn-outline-primary" id="addTestemunhaDefesaBtn">
              <i class="fas fa-plus me-1"></i> Adicionar Testemunha
            </button>
          </div>
          <div class="card-body">
            <div id="testemunhas-defesa-container" data-textblaze-container="testemunha-defesa"></div>
          </div>
        </div>

        <div class="mb-3">
          <label for="observacoes-defesa" class="form-label">Observações da Defesa</label>
          <textarea id="observacoes-defesa" class="form-control" placeholder="Digite as observações da defesa" rows="3" data-textblaze-defesa="observacoes"></textarea>
        </div>

        <div class="d-flex gap-2 justify-content-end">
          <button id="limparBtn" class="btn btn-outline-secondary">
            <i class="fas fa-eraser me-1"></i> Limpar
          </button>
          <button id="salvarBtn" class="btn btn-primary">
            <i class="fas fa-save me-1"></i> Salvar
          </button>
        </div>
      </div>
    </div>
  </div>
</div>
