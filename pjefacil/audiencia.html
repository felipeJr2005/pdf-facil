<div class="form-content visible">
    <!-- Lado Acusatório -->
    <div class="panel">
        <h2 class="section-title">Acusação</h2>

        <div class="section">
            <div class="linha" style="justify-content: space-between; align-items: center;">
                <h3 class="section-title">Ministério Público</h3>
                <div style="display: flex; align-items: center; gap: 12px;">
                    <div class="checkbox-container">
                        <input type="checkbox" id="intimado_mp">
                        <label for="intimado_mp">Intimado</label>
                    </div>
                    <button class="btn btn-primary" onclick="addAssistenteAcusacao()">
                        Assistente de Acusação
                    </button>
                </div>
            </div>
            <div id="assistente-acusacao-container"></div>
        </div>

        <div class="section">
            <div class="section-header">
                <h3 class="section-title">Vítimas</h3>
                <button class="btn btn-primary btn-add" onclick="addVitima()">
                    <span>Adicionar Vítima</span>
                </button>
            </div>
            <div id="vitimas-container"></div>
        </div>

        <div class="section">
            <div class="section-header">
                <h3 class="section-title">Testemunhas</h3>
                <button class="btn btn-primary btn-add" onclick="addTestemunha('mp')">
                    <span>Adicionar Testemunha</span>
                </button>
            </div>
            <div id="testemunhas-mp-container"></div>
        </div>

        <div class="section">
            <div class="section-header">
                <h3 class="section-title">Policiais</h3>
                <button class="btn btn-primary btn-add" onclick="addPolicial()">
                    <span>Adicionar Policial</span>
                </button>
            </div>
            <div id="policiais-container"></div>
        </div>

        <textarea id="observacoes-mp" placeholder="Digite as observações do MP" style="min-height: 150px;"></textarea>
    </div>

    <!-- Lado Defesa -->
    <div class="panel">
        <h2 class="section-title">Defesa</h2>

        <div class="section">
            <div class="section-header">
                <h3 class="section-title">Réus</h3>
                <button class="btn btn-primary btn-add" onclick="addReu()">
                    <span>Adicionar Réu</span>
                </button>
            </div>
            <div id="reus-container"></div>
        </div>

        <div class="section">
            <div class="section-header">
                <h3 class="section-title">Testemunhas</h3>
                <button class="btn btn-primary btn-add" onclick="addTestemunha('defesa')">
                    <span>Adicionar Testemunha</span>
                </button>
            </div>
            <div id="testemunhas-defesa-container"></div>
        </div>

        <textarea id="observacoes-defesa" placeholder="Digite as observações da defesa" style="min-height: 150px;"></textarea>

        <div class="acoes">
            <button onclick="salvarDados()" class="btn btn-primary">Salvar</button>
            <button onclick="limparFormulario()" class="btn btn-danger">Limpar</button>
        </div>
    </div>
</div>

<script>
    // Todas as funções específicas da página de audiência
    function criarLinhaAssistenteAcusacao() {
        const linha = document.createElement('div');
        linha.className = 'linha';

        const baseHtml = `
            <input type="text" placeholder="Nome do Assistente" class="nome">
            <input type="text" placeholder="OAB" class="oab">
            <div class="checkbox-container">
                <input type="checkbox" id="intimado_${Date.now()}" class="intimado">
                <label for="intimado_${Date.now()}">Intimado</label>
            </div>
            <button class="btn btn-danger remove-btn" onclick="this.parentElement.remove()">×</button>
        `;

        linha.innerHTML = baseHtml;
        return linha;
    }

    function addAssistenteAcusacao() {
        const container = document.getElementById('assistente-acusacao-container');
        container.appendChild(criarLinhaAssistenteAcusacao());
    }

    function criarLinha(tipo, extras = '') {
        const linha = document.createElement('div');
        linha.className = 'linha';

        const baseHtml = `
            <input type="text" placeholder="Nome" class="nome">
            <input type="text" placeholder="Endereço" class="endereco">
            <div class="checkbox-container">
                <input type="checkbox" id="intimado_${Date.now()}" class="intimado">
                <label for="intimado_${Date.now()}">Intimado</label>
            </div>
            <button class="btn btn-danger remove-btn" onclick="this.parentElement.remove()">×</button>
        `;

        linha.innerHTML = extras + baseHtml;
        return linha;
    }

    function addVitima() {
        const container = document.getElementById('vitimas-container');
        container.appendChild(criarLinha('vitima'));
    }

    function addTestemunha(tipo) {
        const container = document.getElementById(`testemunhas-${tipo}-container`);
        container.appendChild(criarLinha('testemunha'));
    }

    function addPolicial() {
        const extras = `
            <select class="tipo-policial">
                <option value="pm">PM</option>
                <option value="pc">PC</option>
                <option value="pf">PF</option>
                <option value="prf">PRF</option>
            </select>
        `;
        const linha = criarLinha('policial', extras);
        linha.querySelector('.endereco').placeholder = 'Matrícula/RG';
        document.getElementById('policiais-container').appendChild(linha);
    }

    function addReu() {
        const reuContainer = document.createElement('div');
        reuContainer.className = 'reu-item';
        reuContainer.innerHTML = `
            <div class="linha">
                <input type="text" placeholder="Nome" class="nome">
                <input type="text" placeholder="Endereço" class="endereco">
                <div class="checkbox-container">
                    <input type="checkbox" id="intimado_reu_${Date.now()}" class="intimado">
                    <label for="intimado_reu_${Date.now()}">Intimado</label>
                </div>
                <button class="btn btn-danger remove-btn" onclick="this.closest('.reu-item').remove()">×</button>
            </div>
            <div class="linha">
                <select class="tipo-defesa">
                    <option value="defensoria" selected>Defensoria Pública</option>
                    <option value="particular">Advogado Particular</option>
                </select>
                <input type="text" placeholder="Nome do Advogado" class="nome-advogado" style="display: none;">
                <div class="checkbox-container">
                    <input type="checkbox" id="intimado_adv_${Date.now()}" class="intimado-advogado">
                    <label for="intimado_adv_${Date.now()}">Intimado</label>
                </div>
            </div>
        `;

        const tipoDefesaSelect = reuContainer.querySelector('.tipo-defesa');
        const nomeAdvogadoInput = reuContainer.querySelector('.nome-advogado');
        
        tipoDefesaSelect.addEventListener('change', function() {
            nomeAdvogadoInput.style.display = this.value === 'particular' ? 'block' : 'none';
        });

        const container = document.getElementById('reus-container');
        container.appendChild(reuContainer);
    }

    function salvarDados() {
        window.print();
    }

    function limparFormulario() {
        if (confirm('Tem certeza que deseja limpar todos os dados?')) {
            // Limpar os containers dinâmicos
            ['assistente-acusacao-container', 'vitimas-container', 'testemunhas-mp-container', 'policiais-container', 
             'reus-container', 'testemunhas-defesa-container'].forEach(id => {
                document.getElementById(id).innerHTML = '';
            });

            // Limpar as observações
            document.getElementById('observacoes-mp').value = '';
            document.getElementById('observacoes-defesa').value = '';

            // Limpar todos os checkboxes
            document.querySelectorAll('input[type="checkbox"]').forEach(el => el.checked = false);

            // Limpar todos os campos de texto
            document.querySelectorAll('input[type="text"]').forEach(el => el.value = '');

            // Limpar os selects
            document.querySelectorAll('select').forEach(el => el.selectedIndex = 0);

            // Limpar o campo de nome do advogado (se houver)
            document.querySelectorAll('.nome-advogado').forEach(el => {
                el.value = '';
                el.style.display = 'none';
            });

            // Limpar o checkbox de intimado do MP
            document.getElementById('intimado_mp').checked = false;
        }
    }
</script>
